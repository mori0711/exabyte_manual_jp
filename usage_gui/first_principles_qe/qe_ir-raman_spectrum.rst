================
IR、Ramanスペクトルの計算
================

ここではQuantum Espresso を使用してIR、Ramanスペクトルを計算する方法について説明します。

| 計算モデルにはSiO\ :sub:`2`\(stishovite)を用いて説明します。Import Materials画面で物質名SiO2を検索することで結晶構造を入手することができます。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_001.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 入手したSiO\ :sub:`2`\(stishovite)の計算モデルをマテリアルから選択します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_002.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_003.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_004.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| IR、Ramanスペクトルの計算には、WorkFlowの"IR-Raman_spectrum"を用います。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_005.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_006.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| IR、Ramanスペクトルの計算に必要な流れが設定されています。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_007.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| k点数やカットオフエネルギー値などは自動的に設定されていますが、必要な場合は変更できます。また、IR、Ramanスペクトルの計算では基準振動解析を行うため、計算モデルがエネルギー最小値となるように構造最適化しておく必要があります。必要に応じてpw_scfフローのcalculation変数をrelax(内部座標の最適化)またはvc-relax(格子定数と内部座標の同時最適化)に変更してください。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_008.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_009.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| Ramanスペクトルの計算は交換相関ポテンシャルにLDAを、擬ポテンシャルにノルム保存型擬ポテンシャルを使用する必要があります。ここでは `FHI-PP擬ポテンシャル <https://www.quantum-espresso.org/pseudopotentials/fhi-pp-from-abinit-web-site/>`_ をダウンロードし、 :doc:`qe_add_pp_way2` を参考に設定を行います。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_010.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 最後に使用するクラウド計算機を選択し使用するコア数を選択します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_011.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 計算が終了するとFILESタブが現れ、以下のファイルが出力されます。

======================== =========================================
      ファイル名                        説明
======================== =========================================
spectra_data.csv            スペクトル出力ファイル(csv形式)
IR_spectrum.png             IRスペクトルの図ファイル
Raman_spectrum.png          Ramanスペクトルの図ファイル
spectrum_peak.dat           吸収ピークの情報出力
dynmat.axsf                 基準振動解析結果(Xcrysdenで可視化可能)
======================== =========================================

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_012.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 図ファイルをクリックすると各スペクトルのグラフが可視化されます。
| ・IRスペクトル

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_013.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| ・Ramanスペクトル

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_014.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 続いて、Xcyrsdenを用いて基準振動を可視化する方法を説明します。Remote Desctopを起動し、Applications⇒OtherからXcrysdenを選択します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_015.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_016.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| File⇒Open Structure⇒Open AXSF(Animation XCrySDen Structure File)の順に選択し、File Browserから該当の計算ディレクトリへ移動し、dynmat.axsfファイルを選択してOKをクリックします。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_017.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_018.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| dynmat.axsfを開くと、メイン画面に結晶構造が表示されます。基準振動を表示するにはDisplay⇒Forcesを選択します。初期設定では基準振動のベクトルのサイズが大きいため、Midify⇒Force SettingsよりLength Factor(ベクトル長)やVector thickness factor(ベクトルの太さ)を調整しUpdateボタンをクリックします。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_019.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_020.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_021.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| Animation Control Center(Modify⇒Animation Controls)の矢印ボタンをクリックして、Current Slideをspectrum_peak.dat中の解析したいピークのmode番号に設定します。メイン画面右側の操作パネルを使ってモデルの並進、回転、拡大縮小を行うことができます。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_022.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_ir-raman_spectrum_023.png                    　     |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

`EXabyte.ioのリンク先 <https://exabyte.io/>`_

`EXabyte.ioの事例集 <http://www.engineering-eye.com/EXABYTE/case/>`_
