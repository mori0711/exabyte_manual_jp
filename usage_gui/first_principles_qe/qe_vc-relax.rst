==============
格子最適化計算
==============

ここではQuantum ESPRESSO を使用して格子定数および結晶内部の原子位置を最適化する方法について説明します。

.. raw:: html

   <iframe width="672" height="378" src="https://www.youtube.com/embed/tx7rzKLteYk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
   
-------------------------------------------------------------------------------------------------

| 格子定数の最適化も行うため、WorkFlowの"Variable-cell Relaxation"を使います。
| 自分のWorkFlowから有無を確認します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_001.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| "Variable-cell Relaxation"がない場合には、メニューのBankのWorkFlowから所得します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_002.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 検索から"Vari"と入力します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_003.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| Exabyte社が用意した"Variable-cell Relaxation"をCopyします。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_004.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| コピーすると自分のWorkFlowに保存されます。これで格子最適化の計算ができます。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_005.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| Create Jobからジョブを作成します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_006.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| ジョブ作成画面が現れたら、計算するマテリアルを選択します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_008.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| マテリアルから計算するモデルを選択します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_009.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 選択したモデルが表示されます。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_010.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 次にSelect workflowからダウンロードした"Variable-cell Relaxation"を選択します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_011.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_012.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 使用される儀ポテンシャルの情報を確認したり、k点メッシュ数を設定を行ったりします。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_013.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_014.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 最後に使用するクラウド計算機を選択し使用するコア数を選択します。
| ここでは、モデルが小さいため４コアを使用して計算を行います。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_015.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 保存したら計算するジョブを選択し、Runボタンを押します。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_017.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

| 計算状況を確認することができ、計算出力やエネルギーの収束状況も確認することができます。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_018.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_019.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_020.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+


| 計算が終了するとResultsタブが現れ、最適化した格子定数の情報等を確認することができます。

  +--------------------------------------------------------------------------+
  | .. image:: ./imgs/qe_vc-relax_021.png                                    |
  |    :scale: 40 %                                                          |
  |    :align: center                                                        |
  +--------------------------------------------------------------------------+

